<div class="main-container">
  <lib-sidebar></lib-sidebar>
  <div class="chat-box-container">
    <div class="chat-box-container">
       <mat-card style="height:55px;border-radius:0;">
      <div
        class="model-selector"
        (click)="toggleDropdown()"
        [class.open]="dropdownOpen"
      >
        <button class="model-button">
          {{ selectedModel || 'Select Model' }}
          <mat-icon style="color:grey">expand_more</mat-icon>
        </button>

        <div *ngIf="dropdownOpen" class="dropdown-card">
          <div
            class="dropdown-item"
            *ngFor="let model of models"
            (click)="selectModel(model); $event.stopPropagation()"
          >
            {{ model }}
          </div>
        </div>
      </div>
      </mat-card>
      <div class="chat-messages" #chatContainer>
        <mat-card
          *ngFor="let msg of chatMessages"
          class="message"
          [ngClass]="{ 'user': msg.role === 'user', 'assistant': msg.role === 'assistant' }"
        >
          <!--            {{msg.content}}-->
          <div *ngIf="msg.role === 'user'">{{ msg.content }}</div>
          <markdown
            *ngIf="msg.role === 'assistant'"
            [data]="msg.content"
          ></markdown>
        </mat-card>
      </div>

      <mat-card class="chat-input-container">
        <mat-form-field class="chat-input" appearance="outline">
          <input
            matInput
            placeholder="Type a message..."
            [(ngModel)]="message"
            (keyup.enter)="onSend()"
          />
        </mat-form-field>

        <button
          mat-icon-button
          color="primary"
          class="send-button"
          (click)="onSend()"
          [disabled]="!message.trim()"
        >
          <mat-icon>send</mat-icon>
        </button>
      </mat-card>
    </div>
  </div>
</div>
